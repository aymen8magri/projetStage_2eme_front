<div class="content-wrapper container-xxl p-0">
    <div class="content-body">

        <!-- Début de la section d'édition des utilisateurs -->
        <section class="app-user-edit">
            <!--partie obligatoire-->
            <div class="card">
                <div class="card-body">
                    <form (ngSubmit)="onAddSociete()" [formGroup]="addSociete" class="form-validate">
                         <!-- Submit and Cancel Buttons -->
                         <div class="col-md-12 text-right">
                            <button type="submit" class="btn btn-primary mr-1 mb-1">Ajouter Société</button>
                        </div>
                        <div class="row">
                            <!-- Section pour le champ "Code" -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="code" class="text-danger font-weight-bold">Code</label>
                                    <input type="text" id="code" class="form-control" formControlName="code" name="code" [value]="codeSociete" readonly />
                                </div>
                            </div>

                            <!-- Section pour le champ "Libellé" -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="libelle">Libellé</label>
                                    <input type="text" id="libelle" class="form-control" placeholder="Entrez le libellé"
                                             formControlName="libelle" [class.is-invalid]="formulaireSociete.libelle.invalid && (formulaireSociete.libelle.touched || submitted)" name="libelle"  />
                                    <!-- Messages d'erreur -->
                                    <small class="text-danger" *ngIf="(formulaireSociete.libelle.touched || submitted) && formulaireSociete.libelle.hasError('required')">
                                        Ce champ est obligatoire.
                                    </small>
                                </div>
                            </div>

                            <!-- Section pour le champ "Contact" -->
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="contact">Contact</label>
                                    <input type="text" id="contact" class="form-control" placeholder="Entrez votre contact"
                                             formControlName="contact" [class.is-invalid]="formulaireSociete.contact.invalid && (formulaireSociete.contact.touched || submitted)" name="contact"  />
                                    <!-- Messages d'erreur -->
                                    <small class="text-danger" *ngIf="(formulaireSociete.contact.touched || submitted) && formulaireSociete.contact.hasError('required')">
                                        Le contact est obligatoire.
                                    </small>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            

            <!-- Carte contenant le contenu de la section -->
            <div class="card">
                <div class="card-body">

                    
                    <!-- Onglets de navigation -->
                    <ul ngbNav #nav="ngbNav" class="nav nav-pills">
                        <!-- Onglet Général -->
                        <li ngbNavItem>
                            <a ngbNavLink class="d-flex align-items-center">
                                <i data-feather="globe" class="mr-sm-50"></i>
                                <span class="d-none d-sm-block">Général</span>
                            </a>

                            <!-- Contenu de l'onglet "Général" -->
                            <ng-template ngbNavContent>
                                <!-- Début de la section de contenu de l'onglet -->
                                <div class="tab-pane active" id="account" aria-labelledby="account-tab" role="tabpanel">
                                    

                                    <!-- Début du formulaire d'édition -->
                                    <form (ngSubmit)="onAddSociete()" [formGroup]="addSocieteGeneral" class="form-validate">
                                        <div class="row">

                                            <!-- Avatar et options de téléchargement/réinitialisation -->
                                        <div class="media col-12 ml-5 mb-1">
                                            <a href="javascript:void(0);" class="mr-25">
                                                <!-- Image de profil par défaut ou personnalisée -->
                                                <img [src]="avatarImage || '../../../../../assets/images/avatars/societe.png'"
                                                    class="rounded mr-50" alt="profile image" height="76" width="80" />
                                            </a>
                                            <div class="media-body mt-2 ml-1">
                                                <!-- Bouton pour télécharger une nouvelle image -->
                                                <button (click)="onUploadClick($event)" class="btn btn-sm btn-primary mb-75 mr-75" rippleEffect>
                                                    Upload
                                                </button>
                                                <input type="file" #file id="account-upload" hidden (change)="uploadImage($event)" />
                                                <!-- Bouton pour réinitialiser l'image -->
                                                <button type="button" class="btn btn-sm btn-outline-secondary mb-75" (click)="resetImage()" rippleEffect>
                                                    Reset
                                                </button>
                                            </div>
                                        </div>
                                        <!-- Fin de la section Avatar -->

                                            <!-- Champ: raison_sociale -->
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="raison_sociale">Raison Social</label>
                                                    <input type="text" id="raison_sociale" class="form-control" placeholder="Entrez la raison sociale de l'entreprise"
                                                             name="raison_sociale" formControlName="raison_sociale" [class.is-invalid]="formulaireSocieteGeneral.raison_sociale.invalid && (formulaireSocieteGeneral.raison_sociale.touched || submitted)"  />
                                                    <!-- Messages d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteGeneral.raison_sociale.touched || submitted) && formulaireSocieteGeneral.raison_sociale.hasError('required')">
                                                        La raison sociale est obligatoire.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: adresse -->
                                            <div class="col-md-5">
                                                <div class="form-group">
                                                    <label for="adresse">Adresse</label>
                                                    <input type="text" id="adresse" placeholder="Entrez l'adresse complète"
                                                             class="form-control" name="adresse" formControlName="adresse"
                                                             [class.is-invalid]="formulaireSocieteGeneral.adresse.invalid && (formulaireSocieteGeneral.adresse.touched || submitted)"  />
                                                    <!-- Messages d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteGeneral.adresse.touched || submitted) && formulaireSocieteGeneral.adresse.hasError('required')">
                                                        L'adresse est obligatoire.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: code_postal -->
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="code_postal">Code Postal</label>
                                                    <input type="text" id="code_postal" placeholder="Entrez le code postal" class="form-control" name="code_postal" formControlName="code_postal"  />
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: ville -->
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="ville">Ville</label>
                                                    <input type="text" id="ville" placeholder="Entrez le nom de la ville" class="form-control" name="ville" formControlName="ville"  />
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: region -->
                                            <div class="col-md-5">
                                                <div class="form-group">
                                                    <label for="region">Région</label>
                                                    <select
                                                        id="region"
                                                        class="form-control"
                                                        [class.is-invalid]="formulaireSocieteGeneral.region.invalid && (formulaireSocieteGeneral.region.touched || submitted)"
                                                        formControlName="region"
                                                        name="region"
                                                        
                                                        >
                                                        <option value="" disabled selected>Choisir une Région</option>
                                                        <option *ngFor="let region of listRegions" [value]="region._id">
                                                            {{ region.libelle }}
                                                        </option>
                                                    </select>

                                                    <!-- Messages d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteGeneral.region.touched || submitted) && formulaireSocieteGeneral.region.hasError('required')">
                                                        La région est obligatoire.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: pays -->
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="pays">Pays</label>
                                                    <input type="text" id="pays" placeholder="Entrez le pays" class="form-control" name="pays" formControlName="pays"  />
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: telephone -->
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="telephone">Téléphone</label>
                                                    <input type="text" id="telephone" class="form-control" placeholder="Entrez le numéro de téléphone"
                                                             name="telephone" formControlName="telephone"
                                                             [class.is-invalid]="formulaireSocieteGeneral.telephone.invalid && (formulaireSocieteGeneral.telephone.touched || submitted)" />
                                                     <!-- Messages d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteGeneral.telephone.touched || submitted) && formulaireSocieteGeneral.telephone.hasError('required')">
                                                        Le numéro de téléphone est obligatoire.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: email -->
                                            <div class="col-md-5">
                                                <div class="form-group">
                                                    <label for="email">E-mail</label>
                                                    <input type="text" id="email" placeholder="Entrez votre adresse e-mail" class="form-control"
                                                             name="email" formControlName="email"
                                                             [class.is-invalid]="formulaireSocieteGeneral.email.invalid && (formulaireSocieteGeneral.email.touched || submitted)"  />
                                                     <!-- Messages d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteGeneral.email.touched || submitted) && formulaireSocieteGeneral.email.hasError('required')">
                                                        L'e-mail est obligatoire.
                                                    </small>
                                                    <small class="text-danger" *ngIf="(formulaireSocieteGeneral.email.touched || submitted) && formulaireSocieteGeneral.email.hasError('email')">
                                                        L'adresse e-mail n'est pas valide.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: telecopie -->
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="telecopie">Télécopie</label>
                                                    <input type="text" id="telecopie" placeholder="Entrez le numéro de télécopie" class="form-control" name="telecopie" formControlName="telecopie"  />
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: site_web -->
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="site_web">Site Web</label>
                                                    <input type="text" id="site_web" placeholder="Entrez l'adresse du site web" class="form-control" name="site_web" formControlName="site_web"  />
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: registre_comercial -->
                                            <div class="col-md-5">
                                                <div class="form-group">
                                                    <label for="registre_comercial">Registre Commercial</label>
                                                    <input type="text" id="registre_comercial" placeholder="Entrez le numéro du registre commercial" class="form-control" name="registre_comercial" formControlName="registre_comercial"  />
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: matricule_fiscal -->
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="matricule_fiscal">Matricule Fiscal</label>
                                                    <input type="text" id="matricule_fiscal" placeholder="Entrez le matricule fiscal" 
                                                            class="form-control" name="matricule_fiscal"
                                                             formControlName="matricule_fiscal" [class.is-invalid]="formulaireSocieteGeneral.matricule_fiscal.invalid && (formulaireSocieteGeneral.matricule_fiscal.touched || submitted)"  />
                                                    <!-- Messages d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteGeneral.matricule_fiscal.touched || submitted) && formulaireSocieteGeneral.matricule_fiscal.hasError('required')">
                                                        Le matricule fiscal est obligatoire.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                            <!-- Boutons d'action -->
                                            <div class="col-12 d-flex flex-sm-row flex-column mt-2">
                                                <!-- Bouton Réinitialiser -->
                                                <button type="button" (click)="resetformulaireSocieteGeneral()" class="btn btn-outline-secondary" rippleEffect>
                                                    Reset
                                                </button>
                                            </div>
                                        </div>
                                        
                                    </form>
                                    <!-- Fin du formulaire -->
                                </div>
                                <!-- Fin de la section de contenu de l'onglet -->
                            </ng-template>
                        </li>



                        <li ngbNavItem>
                            <!-- Tab Link for Financial Information -->
                            <a ngbNavLink class="d-flex align-items-center">
                                <i data-feather="pie-chart" class="mr-sm-50"></i>
                                <span class="d-none d-sm-block">Informations Financières</span>
                            </a>
                        
                            <!-- Tab Content: Social Media Links Form -->
                            <ng-template ngbNavContent>
                                <!-- Social Tab starts -->
                                <div class="tab-pane" id="social" aria-labelledby="social-tab" role="tabpanel">
                                    <!-- User's social media form starts -->
                                    <form (ngSubmit)="onAddSociete()" [formGroup]="addSocieteInfos" class="form-validate">
                                        <div class="row">
                                            <!-- Champ: banque -->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="banque">Banque</label>
                                                    <select id="banque" class="form-control" [class.is-invalid]="formulaireSocieteInfos.banque.invalid && (formulaireSocieteInfos.banque.touched || submitted)" formControlName="banque" name="banque" >
                                                        <option value="" disabled selected>Choisir une banque</option>
                                                        <option *ngFor="let banque of listBanques" [value]="banque._id">{{ banque.libelle }}</option>
                                                    </select>
                                                    <!-- Message d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteInfos.banque.touched || submitted) && formulaireSocieteInfos.banque.hasError('required')">
                                                        Veuillez sélectionner une banque.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: agence -->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="agence">Agence</label>
                                                    <input type="text" id="agence" placeholder="Entrez le nom de l'agence" class="form-control"
                                                             formControlName="agence" [class.is-invalid]="formulaireSocieteInfos.agence.invalid && (formulaireSocieteInfos.agence.touched || submitted)" name="agence"  />
                                                    <!-- Messages d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteInfos.agence.touched || submitted) && formulaireSocieteInfos.agence.hasError('required')">
                                                        Le nom de l'agence est obligatoire.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                            <!-- Champ: compte -->
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="compte">Compte</label>
                                                    <input type="text" id="compte" placeholder="Entrez le numéro de compte" class="form-control"
                                                             formControlName="compte" [class.is-invalid]="formulaireSocieteInfos.compte.invalid && (formulaireSocieteInfos.compte.touched || submitted)" name="compte"  />
                                                    <!-- Messages d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteInfos.compte.touched || submitted) && formulaireSocieteInfos.compte.hasError('required')">
                                                        Le numéro de compte est obligatoire.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                        
                                            <!-- Champ: RIB -->
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="RIB">RIB</label>
                                                    <input id="RIB" class="form-control" type="text" placeholder="1234 5678 8765 4321" [mask]="'0000 0000 0000 0000'" 
                                                            formControlName="RIB" [class.is-invalid]="formulaireSocieteInfos.RIB.invalid && (formulaireSocieteInfos.RIB.touched || submitted)" />
                                                    <!-- Message d'erreur -->
                                                    <small class="text-danger" *ngIf="(formulaireSocieteInfos.RIB.touched || submitted) && formulaireSocieteInfos.RIB.hasError('required')">
                                                        Le champ RIB est obligatoire.
                                                    </small>
                                                </div>
                                            </div>
                                        
                                            <!-- Save and Reset Buttons -->
                                            <div class="col-12 d-flex flex-sm-row flex-column mt-2">
                                                <button type="button" (click)="resetformulaireSocieteInfos()" class="btn btn-outline-secondary" rippleEffect>Reset</button>
                                            </div>
                                        </div>
                                        
                                    </form>
                                    <!-- User's social media form ends -->
                                </div>
                                <!-- Social Tab ends -->
                            </ng-template>
                        </li>
                    </ul>
                    <!-- Sortie des onglets -->
                    <div [ngbNavOutlet]="nav" class="mt-2"></div>
                </div>
            </div>
        </section>
        <!-- Fin de la section d'édition des utilisateurs -->
    </div>
</div>